rem This file is generated from Tools/WIX.cmd.in, if you want to change it, be aware 
rem that it will be overwritten. You can edit the template file, and rerun the CMake
rem to see your changes here.
rem 
rem You can set the path to the MERGE_MODULE_NAME and MERGE_MODULE_PATH in the Config.cmake
rem
rem You don't need to run this file manually, you can ask CMake to run it for you using 
rem `cmake --build . --target wix`

rem @echo off
rem autorun
setlocal EnableDelayedExpansion

call "@VC_VARS_PATH_NATIVE@\vcvars64.bat"

rem ---------------------- Packing -------------------------------

echo Melting and Coalescing MSI

set MERGE_MODULE_NAME=@VC_MERGE_MODULE_NAME@
set MERGE_MODULE_PATH="@VC_TOOLS_REDIST_DIR_VARIABLE@\Redist\MSVC\v143\MergeModules\%MERGE_MODULE_NAME%"

echo VCToolsRedistDir: @VC_TOOLS_REDIST_DIR_VARIABLE@

copy %MERGE_MODULE_PATH% . /Y
"@HEAT_EXECUTABLE_NATIVE@" dir @JASP_INSTALL_DIR_NATIVE@ -cg JASPFiles -gg -scom -sreg -sfrag -srd -dr APPLICATIONFOLDER -var var.JASP_INSTALL_DIR -out JASPFilesFragment.wxs || exit /B 7

"@CANDLE_EXECUTABLE_NATIVE@" -arch x64 -dJASP_INSTALL_DIR=@JASP_INSTALL_DIR_NATIVE@  JASPFilesFragment.wxs  || exit /B 8

"@CANDLE_EXECUTABLE_NATIVE@" -dRedistMergeModule=@VC_MERGE_MODULE_NAME@ -arch x64 -dJASP_SOURCE_DIR=@JASP_SOURCE_DIR_NATIVE@ -ext WixUIExtension -ext WixUtilExtension JASP.wxs || exit /B 9

"@LIGHT_EXECUTABLE_NATIVE@" -sval -dRedistMergeModule=@VC_MERGE_MODULE_NAME@ -ext WixUIExtension -ext WixUtilExtension -out JASP\JASP.msi JASPFilesFragment.wixobj JASP.wixobj || exit /B 10

endlocal